%
\begin{isabellebody}%
\setisabellecontext{Mapping{\isacharunderscore}{\kern0pt}Code}%
%
\isadelimtheory
%
\endisadelimtheory
%
\isatagtheory
\isacommand{theory}\isamarkupfalse%
\ Mapping{\isacharunderscore}{\kern0pt}Code\isanewline
\ \ \isakeyword{imports}\ {\isachardoublequoteopen}Containers{\isachardot}{\kern0pt}Mapping{\isacharunderscore}{\kern0pt}Impl{\isachardoublequoteclose}\isanewline
\isakeyword{begin}%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
\isanewline
\isacommand{lift{\isacharunderscore}{\kern0pt}definition}\isamarkupfalse%
\ set{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}idx\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b\ set{\isacharparenright}{\kern0pt}\ mapping\ {\isasymRightarrow}\ {\isacharprime}{\kern0pt}b\ set{\isachardoublequoteclose}\ \isakeyword{is}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlambda}m{\isachardot}{\kern0pt}\ {\isasymUnion}{\isacharparenleft}{\kern0pt}ran\ m{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{{\isachardot}{\kern0pt}}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ set{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}idx{\isacharunderscore}{\kern0pt}code{\isacharbrackleft}{\kern0pt}code{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{fixes}\ t\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ ccompare{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b\ set{\isacharparenright}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}rbt{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}set{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}idx\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ t{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}case\ ID\ CCOMPARE{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharparenright}{\kern0pt}\ of\ None\ {\isasymRightarrow}\ Code{\isachardot}{\kern0pt}abort\ {\isacharparenleft}{\kern0pt}STR\ {\isacharprime}{\kern0pt}{\isacharprime}{\kern0pt}set{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}idx\ RBT{\isacharunderscore}{\kern0pt}Mapping{\isacharcolon}{\kern0pt}\ ccompare\ {\isacharequal}{\kern0pt}\ None{\isacharprime}{\kern0pt}{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ set{\isacharunderscore}{\kern0pt}of{\isacharunderscore}{\kern0pt}idx\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ t{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isacharbar}{\kern0pt}\ Some\ {\isacharunderscore}{\kern0pt}\ {\isasymRightarrow}\ {\isasymUnion}{\isacharparenleft}{\kern0pt}snd\ {\isacharbackquote}{\kern0pt}\ set\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping{\isadigit{2}}{\isachardot}{\kern0pt}entries\ t{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{unfolding}\isamarkupfalse%
\ RBT{\isacharunderscore}{\kern0pt}Mapping{\isacharunderscore}{\kern0pt}def\isanewline
\ \ \isacommand{by}\isamarkupfalse%
\ transfer\ {\isacharparenleft}{\kern0pt}auto\ simp{\isacharcolon}{\kern0pt}\ ran{\isacharunderscore}{\kern0pt}def\ rbt{\isacharunderscore}{\kern0pt}comp{\isacharunderscore}{\kern0pt}lookup{\isacharbrackleft}{\kern0pt}OF\ ID{\isacharunderscore}{\kern0pt}ccompare{\isacharprime}{\kern0pt}{\isacharbrackright}{\kern0pt}\ ord{\isachardot}{\kern0pt}is{\isacharunderscore}{\kern0pt}rbt{\isacharunderscore}{\kern0pt}def\ linorder{\isachardot}{\kern0pt}rbt{\isacharunderscore}{\kern0pt}lookup{\isacharunderscore}{\kern0pt}in{\isacharunderscore}{\kern0pt}tree{\isacharbrackleft}{\kern0pt}OF\ comparator{\isachardot}{\kern0pt}linorder{\isacharbrackleft}{\kern0pt}OF\ ID{\isacharunderscore}{\kern0pt}ccompare{\isacharprime}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isacharbrackright}{\kern0pt}\ split{\isacharcolon}{\kern0pt}\ option{\isachardot}{\kern0pt}splits{\isacharparenright}{\kern0pt}{\isacharplus}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ mapping{\isacharunderscore}{\kern0pt}combine{\isacharbrackleft}{\kern0pt}code{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{fixes}\ t\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ ccompare{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}rbt{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}Mapping{\isachardot}{\kern0pt}combine\ f\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ t{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ u{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}case\ ID\ CCOMPARE{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharparenright}{\kern0pt}\ of\ None\ {\isasymRightarrow}\ Code{\isachardot}{\kern0pt}abort\ {\isacharparenleft}{\kern0pt}STR\ {\isacharprime}{\kern0pt}{\isacharprime}{\kern0pt}combine\ RBT{\isacharunderscore}{\kern0pt}Mapping{\isacharcolon}{\kern0pt}\ ccompare\ {\isacharequal}{\kern0pt}\ None{\isacharprime}{\kern0pt}{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ Mapping{\isachardot}{\kern0pt}combine\ f\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ t{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ u{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isacharbar}{\kern0pt}\ Some\ {\isacharunderscore}{\kern0pt}\ {\isasymRightarrow}\ RBT{\isacharunderscore}{\kern0pt}Mapping\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping{\isadigit{2}}{\isachardot}{\kern0pt}join\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ f{\isacharparenright}{\kern0pt}\ t\ u{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ Mapping{\isachardot}{\kern0pt}combine{\isachardot}{\kern0pt}abs{\isacharunderscore}{\kern0pt}eq\ Mapping{\isacharunderscore}{\kern0pt}inject\ lookup{\isacharunderscore}{\kern0pt}join\ split{\isacharcolon}{\kern0pt}\ option{\isachardot}{\kern0pt}split{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{lift{\isacharunderscore}{\kern0pt}definition}\isamarkupfalse%
\ mapping{\isacharunderscore}{\kern0pt}join\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}b\ {\isasymRightarrow}\ {\isacharprime}{\kern0pt}b\ {\isasymRightarrow}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping{\isachardoublequoteclose}\ \isakeyword{is}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlambda}f\ m\ m{\isacharprime}{\kern0pt}\ x{\isachardot}{\kern0pt}\ case\ m\ x\ of\ None\ {\isasymRightarrow}\ None\ {\isacharbar}{\kern0pt}\ Some\ y\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}case\ m{\isacharprime}{\kern0pt}\ x\ of\ None\ {\isasymRightarrow}\ None\ {\isacharbar}{\kern0pt}\ Some\ y{\isacharprime}{\kern0pt}\ {\isasymRightarrow}\ Some\ {\isacharparenleft}{\kern0pt}f\ y\ y{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{{\isachardot}{\kern0pt}}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ mapping{\isacharunderscore}{\kern0pt}join{\isacharunderscore}{\kern0pt}code{\isacharbrackleft}{\kern0pt}code{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{fixes}\ t\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ ccompare{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}rbt{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}mapping{\isacharunderscore}{\kern0pt}join\ f\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ t{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ u{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}case\ ID\ CCOMPARE{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharparenright}{\kern0pt}\ of\ None\ {\isasymRightarrow}\ Code{\isachardot}{\kern0pt}abort\ {\isacharparenleft}{\kern0pt}STR\ {\isacharprime}{\kern0pt}{\isacharprime}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}join\ RBT{\isacharunderscore}{\kern0pt}Mapping{\isacharcolon}{\kern0pt}\ ccompare\ {\isacharequal}{\kern0pt}\ None{\isacharprime}{\kern0pt}{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}join\ f\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ t{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ u{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isacharbar}{\kern0pt}\ Some\ {\isacharunderscore}{\kern0pt}\ {\isasymRightarrow}\ RBT{\isacharunderscore}{\kern0pt}Mapping\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping{\isadigit{2}}{\isachardot}{\kern0pt}meet\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ f{\isacharparenright}{\kern0pt}\ t\ u{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}join{\isachardot}{\kern0pt}abs{\isacharunderscore}{\kern0pt}eq\ Mapping{\isacharunderscore}{\kern0pt}inject\ lookup{\isacharunderscore}{\kern0pt}meet\ split{\isacharcolon}{\kern0pt}\ option{\isachardot}{\kern0pt}split{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{context}\isamarkupfalse%
\ \isakeyword{fixes}\ dummy\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharprime}{\kern0pt}a\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ ccompare{\isachardoublequoteclose}\ \isakeyword{begin}\isanewline
\isanewline
\isacommand{lift{\isacharunderscore}{\kern0pt}definition}\isamarkupfalse%
\ diff\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}rbt\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}rbt\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}rbt{\isachardoublequoteclose}\ \isakeyword{is}\ {\isachardoublequoteopen}rbt{\isacharunderscore}{\kern0pt}comp{\isacharunderscore}{\kern0pt}minus\ ccomp{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ {\isadigit{4}}\ {\isadigit{3}}\ intro{\isacharcolon}{\kern0pt}\ linorder{\isachardot}{\kern0pt}rbt{\isacharunderscore}{\kern0pt}minus{\isacharunderscore}{\kern0pt}is{\isacharunderscore}{\kern0pt}rbt\ ID{\isacharunderscore}{\kern0pt}ccompare\ ord{\isachardot}{\kern0pt}is{\isacharunderscore}{\kern0pt}rbt{\isacharunderscore}{\kern0pt}rbt{\isacharunderscore}{\kern0pt}sorted\ simp{\isacharcolon}{\kern0pt}\ rbt{\isacharunderscore}{\kern0pt}comp{\isacharunderscore}{\kern0pt}minus{\isacharbrackleft}{\kern0pt}OF\ ID{\isacharunderscore}{\kern0pt}ccompare{\isacharprime}{\kern0pt}{\isacharbrackright}{\kern0pt}{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{end}\isamarkupfalse%
\isanewline
\isanewline
\isacommand{context}\isamarkupfalse%
\ \isakeyword{assumes}\ ID{\isacharunderscore}{\kern0pt}ccompare{\isacharunderscore}{\kern0pt}neq{\isacharunderscore}{\kern0pt}None{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}ID\ CCOMPARE{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ ccompare{\isacharparenright}{\kern0pt}\ {\isasymnoteq}\ None{\isachardoublequoteclose}\isanewline
\isakeyword{begin}\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ lookup{\isacharunderscore}{\kern0pt}diff{\isacharcolon}{\kern0pt}\isanewline
\ \ {\isachardoublequoteopen}RBT{\isacharunderscore}{\kern0pt}Mapping{\isadigit{2}}{\isachardot}{\kern0pt}lookup\ {\isacharparenleft}{\kern0pt}diff\ {\isacharparenleft}{\kern0pt}t{\isadigit{1}}\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}rbt{\isacharparenright}{\kern0pt}\ t{\isadigit{2}}{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\isanewline
\ \ {\isacharparenleft}{\kern0pt}{\isasymlambda}k{\isachardot}{\kern0pt}\ case\ RBT{\isacharunderscore}{\kern0pt}Mapping{\isadigit{2}}{\isachardot}{\kern0pt}lookup\ t{\isadigit{1}}\ k\ of\ None\ {\isasymRightarrow}\ None\ {\isacharbar}{\kern0pt}\ Some\ v{\isadigit{1}}\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}case\ RBT{\isacharunderscore}{\kern0pt}Mapping{\isadigit{2}}{\isachardot}{\kern0pt}lookup\ t{\isadigit{2}}\ k\ of\ None\ {\isasymRightarrow}\ Some\ v{\isadigit{1}}\ {\isacharbar}{\kern0pt}\ Some\ v{\isadigit{2}}\ {\isasymRightarrow}\ None{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ transfer\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ fun{\isacharunderscore}{\kern0pt}eq{\isacharunderscore}{\kern0pt}iff\ linorder{\isachardot}{\kern0pt}rbt{\isacharunderscore}{\kern0pt}lookup{\isacharunderscore}{\kern0pt}rbt{\isacharunderscore}{\kern0pt}minus{\isacharbrackleft}{\kern0pt}OF\ mapping{\isacharunderscore}{\kern0pt}linorder{\isacharbrackright}{\kern0pt}\ ID{\isacharunderscore}{\kern0pt}ccompare{\isacharunderscore}{\kern0pt}neq{\isacharunderscore}{\kern0pt}None\ restrict{\isacharunderscore}{\kern0pt}map{\isacharunderscore}{\kern0pt}def\ split{\isacharcolon}{\kern0pt}\ option{\isachardot}{\kern0pt}splits{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
\isanewline
\isacommand{end}\isamarkupfalse%
\isanewline
\isanewline
\isacommand{lift{\isacharunderscore}{\kern0pt}definition}\isamarkupfalse%
\ mapping{\isacharunderscore}{\kern0pt}antijoin\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping{\isachardoublequoteclose}\ \isakeyword{is}\isanewline
\ \ {\isachardoublequoteopen}{\isasymlambda}m\ m{\isacharprime}{\kern0pt}\ x{\isachardot}{\kern0pt}\ case\ m\ x\ of\ None\ {\isasymRightarrow}\ None\ {\isacharbar}{\kern0pt}\ Some\ y\ {\isasymRightarrow}\ {\isacharparenleft}{\kern0pt}case\ m{\isacharprime}{\kern0pt}\ x\ of\ None\ {\isasymRightarrow}\ Some\ y\ {\isacharbar}{\kern0pt}\ Some\ y{\isacharprime}{\kern0pt}\ {\isasymRightarrow}\ None{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}%
\isadelimproof
\ %
\endisadelimproof
%
\isatagproof
\isacommand{{\isachardot}{\kern0pt}}\isamarkupfalse%
%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
%
\endisadelimproof
\isanewline
\isanewline
\isacommand{lemma}\isamarkupfalse%
\ mapping{\isacharunderscore}{\kern0pt}antijoin{\isacharunderscore}{\kern0pt}code{\isacharbrackleft}{\kern0pt}code{\isacharbrackright}{\kern0pt}{\isacharcolon}{\kern0pt}\isanewline
\ \ \isakeyword{fixes}\ t\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ {\isachardoublequoteopen}{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a\ {\isacharcolon}{\kern0pt}{\isacharcolon}{\kern0pt}\ ccompare{\isacharcomma}{\kern0pt}\ {\isacharprime}{\kern0pt}b{\isacharparenright}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}rbt{\isachardoublequoteclose}\isanewline
\ \ \isakeyword{shows}\ {\isachardoublequoteopen}mapping{\isacharunderscore}{\kern0pt}antijoin\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ t{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ u{\isacharparenright}{\kern0pt}\ {\isacharequal}{\kern0pt}\isanewline
\ \ \ \ {\isacharparenleft}{\kern0pt}case\ ID\ CCOMPARE{\isacharparenleft}{\kern0pt}{\isacharprime}{\kern0pt}a{\isacharparenright}{\kern0pt}\ of\ None\ {\isasymRightarrow}\ Code{\isachardot}{\kern0pt}abort\ {\isacharparenleft}{\kern0pt}STR\ {\isacharprime}{\kern0pt}{\isacharprime}{\kern0pt}mapping{\isacharunderscore}{\kern0pt}antijoin\ RBT{\isacharunderscore}{\kern0pt}Mapping{\isacharcolon}{\kern0pt}\ ccompare\ {\isacharequal}{\kern0pt}\ None{\isacharprime}{\kern0pt}{\isacharprime}{\kern0pt}{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}{\isasymlambda}{\isacharunderscore}{\kern0pt}{\isachardot}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}antijoin\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ t{\isacharparenright}{\kern0pt}\ {\isacharparenleft}{\kern0pt}RBT{\isacharunderscore}{\kern0pt}Mapping\ u{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}\isanewline
\ \ \ \ {\isacharbar}{\kern0pt}\ Some\ {\isacharunderscore}{\kern0pt}\ {\isasymRightarrow}\ RBT{\isacharunderscore}{\kern0pt}Mapping\ {\isacharparenleft}{\kern0pt}diff\ t\ u{\isacharparenright}{\kern0pt}{\isacharparenright}{\kern0pt}{\isachardoublequoteclose}\isanewline
%
\isadelimproof
\ \ %
\endisadelimproof
%
\isatagproof
\isacommand{by}\isamarkupfalse%
\ {\isacharparenleft}{\kern0pt}auto\ simp\ add{\isacharcolon}{\kern0pt}\ mapping{\isacharunderscore}{\kern0pt}antijoin{\isachardot}{\kern0pt}abs{\isacharunderscore}{\kern0pt}eq\ Mapping{\isacharunderscore}{\kern0pt}inject\ lookup{\isacharunderscore}{\kern0pt}diff\ split{\isacharcolon}{\kern0pt}\ option{\isachardot}{\kern0pt}split{\isacharparenright}{\kern0pt}%
\endisatagproof
{\isafoldproof}%
%
\isadelimproof
\isanewline
%
\endisadelimproof
%
\isadelimtheory
\isanewline
%
\endisadelimtheory
%
\isatagtheory
\isacommand{end}\isamarkupfalse%
%
\endisatagtheory
{\isafoldtheory}%
%
\isadelimtheory
%
\endisadelimtheory
%
\end{isabellebody}%
\endinput
%:%file=~/phd/rewriting/ailamazyan/thys/Mapping_Code.thy%:%
%:%10=1%:%
%:%11=1%:%
%:%12=2%:%
%:%13=3%:%
%:%18=3%:%
%:%21=4%:%
%:%22=5%:%
%:%23=5%:%
%:%24=6%:%
%:%26=6%:%
%:%30=6%:%
%:%38=6%:%
%:%39=7%:%
%:%40=8%:%
%:%41=8%:%
%:%42=9%:%
%:%43=10%:%
%:%45=12%:%
%:%48=13%:%
%:%52=13%:%
%:%53=13%:%
%:%54=14%:%
%:%55=14%:%
%:%60=14%:%
%:%63=15%:%
%:%64=16%:%
%:%65=16%:%
%:%66=17%:%
%:%67=18%:%
%:%69=20%:%
%:%72=21%:%
%:%76=21%:%
%:%77=21%:%
%:%82=21%:%
%:%85=22%:%
%:%86=23%:%
%:%87=23%:%
%:%88=24%:%
%:%90=24%:%
%:%94=24%:%
%:%102=24%:%
%:%103=25%:%
%:%104=26%:%
%:%105=26%:%
%:%106=27%:%
%:%107=28%:%
%:%109=30%:%
%:%112=31%:%
%:%116=31%:%
%:%117=31%:%
%:%122=31%:%
%:%125=32%:%
%:%126=33%:%
%:%127=33%:%
%:%128=34%:%
%:%129=35%:%
%:%130=35%:%
%:%131=36%:%
%:%134=37%:%
%:%138=37%:%
%:%139=37%:%
%:%144=37%:%
%:%147=38%:%
%:%148=39%:%
%:%149=39%:%
%:%150=40%:%
%:%151=41%:%
%:%152=41%:%
%:%153=42%:%
%:%154=43%:%
%:%155=44%:%
%:%156=44%:%
%:%157=45%:%
%:%158=46%:%
%:%161=47%:%
%:%165=47%:%
%:%166=47%:%
%:%171=47%:%
%:%174=48%:%
%:%175=49%:%
%:%176=49%:%
%:%177=50%:%
%:%178=51%:%
%:%179=51%:%
%:%180=52%:%
%:%182=52%:%
%:%186=52%:%
%:%194=52%:%
%:%195=53%:%
%:%196=54%:%
%:%197=54%:%
%:%198=55%:%
%:%199=56%:%
%:%201=58%:%
%:%204=59%:%
%:%208=59%:%
%:%209=59%:%
%:%214=59%:%
%:%219=60%:%
%:%224=61%:%